@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CSS VARIABLES
   ============================================ */
:root {
  /* Static color values */
  --sage-50: #f4f7f2;
  --sage-100: #e8efe4;
  --sage-200: #d1dfca;
  --sage-300: #b3cba6;
  --sage-400: #9ab889;
  --sage-500: #87ae73;
  --sage-600: #6b9359;
  --sage-700: #547545;
  --ink: #1c1917;
  --gold: #c9a227;
  --burgundy: #722f37;

  /* Amber palette */
  --amber-50: #fffbeb;
  --amber-100: #fef3c7;
  --amber-200: #fde68a;
  --amber-300: #fcd34d;
  --amber-400: #fbbf24;
  --amber-500: #f59e0b;
  --amber-600: #d97706;
  --amber-700: #b45309;

  /* Slate palette */
  --slate-50: #f8fafc;
  --slate-100: #f1f5f9;
  --slate-200: #e2e8f0;
  --slate-300: #cbd5e1;
  --slate-400: #94a3b8;
  --slate-500: #64748b;
  --slate-600: #475569;
  --slate-700: #334155;

  /* Purple palette (Teaching English) */
  --purple-50: #faf5ff;
  --purple-100: #f3e8ff;
  --purple-200: #e9d5ff;
  --purple-300: #d8b4fe;
  --purple-400: #c084fc;
  --purple-500: #a855f7;
  --purple-600: #9333ea;
  --purple-700: #7e22ce;

  /* Navy palette (Relationships) */
  --navy-50: #f0f4f8;
  --navy-100: #d9e2ec;
  --navy-200: #bcccdc;
  --navy-300: #9fb3c8;
  --navy-400: #829ab1;
  --navy-500: #627d98;
  --navy-600: #486581;
  --navy-700: #334e68;

  /* Theme-aware variables (defaults to sage) */
  --theme-50: var(--sage-50);
  --theme-100: var(--sage-100);
  --theme-200: var(--sage-200);
  --theme-300: var(--sage-300);
  --theme-400: var(--sage-400);
  --theme-500: var(--sage-500);
  --theme-600: var(--sage-600);
  --theme-700: var(--sage-700);
}

/* Amber theme (Hall Family Devotions) */
[data-theme="amber"] {
  --theme-50: var(--amber-50);
  --theme-100: var(--amber-100);
  --theme-200: var(--amber-200);
  --theme-300: var(--amber-300);
  --theme-400: var(--amber-400);
  --theme-500: var(--amber-500);
  --theme-600: var(--amber-600);
  --theme-700: var(--amber-700);
}

/* Neutral theme (All Scheduled) */
[data-theme="neutral"] {
  --theme-50: var(--slate-50);
  --theme-100: var(--slate-100);
  --theme-200: var(--slate-200);
  --theme-300: var(--slate-300);
  --theme-400: var(--slate-400);
  --theme-500: var(--slate-500);
  --theme-600: var(--slate-600);
  --theme-700: var(--slate-700);
}

/* Purple theme (Teaching English) */
[data-theme="purple"] {
  --theme-50: var(--purple-50);
  --theme-100: var(--purple-100);
  --theme-200: var(--purple-200);
  --theme-300: var(--purple-300);
  --theme-400: var(--purple-400);
  --theme-500: var(--purple-500);
  --theme-600: var(--purple-600);
  --theme-700: var(--purple-700);
}

/* Navy theme (Relationships) */
[data-theme="navy"] {
  --theme-50: var(--navy-50);
  --theme-100: var(--navy-100);
  --theme-200: var(--navy-200);
  --theme-300: var(--navy-300);
  --theme-400: var(--navy-400);
  --theme-500: var(--navy-500);
  --theme-600: var(--navy-600);
  --theme-700: var(--navy-700);
}

/* ============================================
   BASE STYLES
   ============================================ */

/* Safe area support for iOS notch/status bar */
html {
  background: var(--theme-400);
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
  font-weight: 400;
  font-optical-sizing: auto;
  letter-spacing: -0.011em;
  color: var(--ink);
  background: linear-gradient(180deg,
    var(--theme-400) 0%,
    var(--theme-300) 25%,
    var(--theme-200) 50%,
    var(--theme-100) 75%,
    var(--theme-50) 100%
  );
  min-height: 100vh;
  min-height: 100dvh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  transition: background 0.5s ease-out;
  /* Safe area padding for iOS */
  padding-top: env(safe-area-inset-top);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* View transition overlay - applied during theme changes */
.view-transitioning {
  position: relative;
}

.view-transitioning::before {
  content: '';
  position: fixed;
  inset: 0;
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  z-index: 9998;
  animation: view-fade-blur 0.4s ease-out forwards;
  pointer-events: none;
}

@keyframes view-fade-blur {
  0% {
    opacity: 1;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  100% {
    opacity: 0;
    backdrop-filter: blur(0px);
    -webkit-backdrop-filter: blur(0px);
  }
}

h1, h2, h3, h4, h5, h6 {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
  font-weight: 600;
  letter-spacing: -0.025em;
  line-height: 1.2;
}

/* Refined text sizes */
.text-display {
  font-weight: 600;
  letter-spacing: -0.03em;
}

.text-body {
  font-weight: 400;
  letter-spacing: -0.011em;
  line-height: 1.5;
}

.text-label {
  font-weight: 500;
  letter-spacing: 0.01em;
  font-size: 0.75rem;
  text-transform: uppercase;
}

/* ============================================
   GLOSSY BLOB DECORATIONS
   ============================================ */
.glossy-blob {
  position: fixed;
  border-radius: 50%;
  pointer-events: none;
  z-index: 0;
}

.glossy-blob-1 {
  width: 500px;
  height: 500px;
  top: -150px;
  left: 15%;
  background: radial-gradient(circle at 30% 30%,
    rgba(255, 255, 255, 0.6) 0%,
    color-mix(in srgb, var(--theme-500) 40%, transparent) 40%,
    color-mix(in srgb, var(--theme-500) 10%, transparent) 70%,
    transparent 100%
  );
  filter: blur(60px);
  animation: float-slow 20s ease-in-out infinite;
  transition: background 0.3s ease;
}

.glossy-blob-2 {
  width: 350px;
  height: 350px;
  top: 150px;
  right: 5%;
  background: radial-gradient(circle at 40% 40%,
    rgba(255, 255, 255, 0.5) 0%,
    color-mix(in srgb, var(--theme-400) 35%, transparent) 50%,
    transparent 80%
  );
  filter: blur(50px);
  animation: float-slow 15s ease-in-out infinite reverse;
  transition: background 0.3s ease;
}

.glossy-blob-3 {
  width: 300px;
  height: 300px;
  bottom: 10%;
  left: 10%;
  background: radial-gradient(circle at 50% 50%,
    rgba(255, 255, 255, 0.4) 0%,
    color-mix(in srgb, var(--theme-300) 30%, transparent) 50%,
    transparent 80%
  );
  filter: blur(40px);
  animation: float-slow 18s ease-in-out infinite;
  animation-delay: -5s;
  transition: background 0.3s ease;
}

@keyframes float-slow {
  0%, 100% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-30px) scale(1.05);
  }
}

/* ============================================
   FLOATING PILL NAVIGATION
   ============================================ */
.nav-floating {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 9999px;
  box-shadow:
    0 4px 24px rgba(0, 0, 0, 0.08),
    0 1px 3px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.6);
  animation: nav-slide-down 0.6s ease-out;
}

.nav-item {
  padding: 0.5rem 1rem;
  border-radius: 9999px;
  font-weight: 500;
  transition: all 0.2s ease;
}

.nav-item:hover {
  background: color-mix(in srgb, var(--theme-500) 15%, transparent);
}

.nav-item.active {
  background: color-mix(in srgb, var(--theme-500) 25%, transparent);
  color: var(--theme-700);
}

@keyframes nav-slide-down {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out;
}

/* ============================================
   GLASS CARD STYLES
   ============================================ */
.glass-card {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  border-radius: 1.5rem;
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.08),
    0 2px 8px rgba(0, 0, 0, 0.04);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  max-width: 100%;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.glass-card:hover {
  box-shadow:
    0 12px 40px rgba(0, 0, 0, 0.12),
    0 4px 12px rgba(0, 0, 0, 0.06);
  transform: translateY(-2px);
}

/* ============================================
   GLOSSY BUTTON STYLES
   ============================================ */
.btn-glossy {
  background: linear-gradient(135deg, #1c1917 0%, #292524 100%);
  color: white;
  border-radius: 9999px;
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  box-shadow:
    0 4px 14px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transition: all 0.2s ease;
}

.btn-glossy:hover {
  transform: translateY(-1px);
  box-shadow:
    0 6px 20px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.btn-glossy:active {
  transform: scale(0.98);
}

.btn-glossy-sage {
  background: linear-gradient(135deg, #6b9359 0%, #87ae73 100%);
  color: white;
  border-radius: 9999px;
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  box-shadow:
    0 4px 14px rgba(107, 147, 89, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  transition: all 0.2s ease;
}

.btn-glossy-sage:hover {
  transform: translateY(-1px);
  box-shadow:
    0 6px 20px rgba(107, 147, 89, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.btn-glossy-sage:active {
  transform: scale(0.98);
}

.btn-glossy-amber {
  background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%);
  color: white;
  border-radius: 9999px;
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  box-shadow:
    0 4px 14px rgba(217, 119, 6, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  transition: all 0.2s ease;
}

.btn-glossy-amber:hover {
  transform: translateY(-1px);
  box-shadow:
    0 6px 20px rgba(217, 119, 6, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.btn-glossy-amber:active {
  transform: scale(0.98);
}

.btn-glass {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 9999px;
  color: #1c1917;
  font-weight: 500;
  transition: all 0.2s ease;
}

.btn-glass:hover {
  background: rgba(255, 255, 255, 0.9);
  transform: translateY(-1px);
}

.btn-glass:active {
  transform: scale(0.98);
}

/* Liquid Glass Toggle - Apple-style segmented control */
.toggle-glass-container {
  background: rgba(120, 120, 128, 0.12);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 9999px;
  padding: 2px;
  position: relative;
}

.toggle-glass-indicator {
  position: absolute;
  top: 2px;
  height: calc(100% - 4px);
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 9999px;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.08),
    0 2px 8px rgba(0, 0, 0, 0.04),
    inset 0 0 0 0.5px rgba(255, 255, 255, 0.5);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.toggle-glass-btn {
  position: relative;
  z-index: 1;
  padding: 6px 22px;
  font-size: 13px;
  font-weight: 500;
  color: rgba(0, 0, 0, 0.5);
  transition: color 0.2s ease;
  border-radius: 9999px;
  white-space: nowrap;
}

.toggle-glass-btn.active {
  color: rgba(0, 0, 0, 0.85);
}

.toggle-glass-btn:hover:not(.active) {
  color: rgba(0, 0, 0, 0.65);
}

/* ============================================
   FORM ELEMENTS
   ============================================ */
.input-glass {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 0.75rem;
  padding: 0.75rem 1rem;
  font-weight: 400;
  transition: all 0.2s ease;
}

.input-glass:focus {
  background: rgba(255, 255, 255, 0.95);
  border-color: color-mix(in srgb, var(--theme-500) 50%, transparent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--theme-500) 15%, transparent);
  outline: none;
}

.select-glass {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 0.75rem;
  padding: 0.75rem 1rem;
  font-weight: 400;
  transition: all 0.2s ease;
  cursor: pointer;
}

.select-glass:focus {
  background: rgba(255, 255, 255, 0.95);
  border-color: color-mix(in srgb, var(--theme-500) 50%, transparent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--theme-500) 15%, transparent);
  outline: none;
}

/* ============================================
   MODAL STYLES
   ============================================ */
.modal-backdrop {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.modal-glass {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 1.5rem;
  box-shadow:
    0 25px 50px rgba(0, 0, 0, 0.15),
    0 10px 20px rgba(0, 0, 0, 0.1);
  animation: modal-scale-in 0.3s ease-out forwards;
}

@keyframes modal-scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* ============================================
   CALENDAR STYLES
   ============================================ */
.calendar-day {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 0.75rem;
}

.calendar-day:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px color-mix(in srgb, var(--theme-500) 20%, transparent);
}

/* ============================================
   WEEK NUMBER INDICATORS
   ============================================ */
.week-indicator {
  width: 24px;
  height: 32px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  margin-top: 8px;
}

.week-indicator::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 100%;
  height: 28px;
  background: color-mix(in srgb, var(--theme-400) 30%, transparent);
  border-radius: 14px 0 0 14px;
  transition: all 0.2s ease;
}

.week-indicator span {
  position: relative;
  z-index: 1;
  font-size: 0.55rem;
  font-weight: 600;
  color: var(--theme-600);
  letter-spacing: 0.01em;
}

/* Current Week Highlight */
.week-indicator.current::before {
  background: linear-gradient(135deg, var(--theme-600) 0%, var(--theme-500) 100%);
  box-shadow: 0 2px 6px color-mix(in srgb, var(--theme-600) 30%, transparent);
}

.week-indicator.current span {
  color: white;
  font-weight: 600;
}

/* Responsive adjustments */
@media (min-width: 640px) {
  .week-indicator {
    width: 28px;
    height: 38px;
    margin-top: 10px;
  }
  .week-indicator::before {
    height: 32px;
    border-radius: 16px 0 0 16px;
  }
  .week-indicator span {
    font-size: 0.6rem;
  }
}

/* ============================================
   ENTRY CARDS
   ============================================ */
.entry-card {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 0.5rem;
}

.entry-card:hover {
  transform: scale(1.02);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* ============================================
   ANIMATIONS
   ============================================ */
@keyframes card-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-card-in {
  animation: card-fade-in 0.4s ease-out forwards;
}

/* Staggered animation delays */
.stagger-1 { animation-delay: 0.05s; opacity: 0; }
.stagger-2 { animation-delay: 0.1s; opacity: 0; }
.stagger-3 { animation-delay: 0.15s; opacity: 0; }
.stagger-4 { animation-delay: 0.2s; opacity: 0; }
.stagger-5 { animation-delay: 0.25s; opacity: 0; }

/* Smooth transitions */
.transition-smooth {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.transition-bounce {
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ============================================
   TOAST NOTIFICATIONS
   ============================================ */
.toast {
  animation: toast-slide-in 0.3s ease-out;
  border-radius: 9999px;
  backdrop-filter: blur(10px);
}

@keyframes toast-slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* ============================================
   SCROLLBAR
   ============================================ */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: color-mix(in srgb, var(--theme-500) 10%, transparent);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--theme-500) 40%, transparent);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: color-mix(in srgb, var(--theme-500) 60%, transparent);
}

/* ============================================
   UTILITY CLASSES
   ============================================ */
.text-thin {
  font-weight: 300;
}

.text-medium {
  font-weight: 500;
}

.bg-gradient-sage {
  background: linear-gradient(135deg, #87ae73 0%, #6b9359 100%);
}

/* Loading spinner */
.animate-pulse-sage {
  animation: pulse-sage 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse-sage {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* ============================================
   STAR INDICATOR (Prepared Status)
   ============================================ */
.star-indicator {
  position: absolute;
  top: 2px;
  right: 2px;
  font-size: 0.65rem;
  line-height: 1;
  color: var(--gold);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  z-index: 5;
}

.star-indicator::before {
  content: '‚≠ê';
}

/* ============================================
   THEME-AWARE BUTTON
   ============================================ */
.btn-themed {
  background: linear-gradient(135deg, var(--theme-600) 0%, var(--theme-500) 100%);
  color: white;
  border-radius: 9999px;
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  box-shadow:
    0 4px 14px color-mix(in srgb, var(--theme-600) 30%, transparent),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  transition: all 0.2s ease;
}

.btn-themed:hover {
  transform: translateY(-1px);
  box-shadow:
    0 6px 20px color-mix(in srgb, var(--theme-600) 40%, transparent),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.btn-themed:active {
  transform: scale(0.98);
}

/* ============================================
   VIEW SWITCHER POPOVER
   ============================================ */
.view-switcher-popover {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 0.75rem;
  box-shadow:
    0 10px 40px rgba(0, 0, 0, 0.15),
    0 4px 12px rgba(0, 0, 0, 0.08);
  animation: popover-scale-in 0.2s ease-out;
}

@keyframes popover-scale-in {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-4px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.view-switcher-item {
  padding: 0.625rem 1rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  cursor: pointer;
  transition: background 0.15s ease;
}

.view-switcher-item:first-child {
  border-radius: 0.75rem 0.75rem 0 0;
}

.view-switcher-item:last-child {
  border-radius: 0 0 0.75rem 0.75rem;
}

.view-switcher-item:hover {
  background: rgba(0, 0, 0, 0.05);
}

.view-switcher-item.active {
  background: color-mix(in srgb, var(--theme-500) 12%, transparent);
}

/* ============================================
   WEEKLY CALENDAR VIEW
   ============================================ */
.weekly-calendar {
  display: flex;
  gap: 0.5rem;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  padding: 0.5rem 0;
}

.weekly-day {
  flex: 0 0 calc((100% - 3rem) / 7);
  min-width: 120px;
  scroll-snap-align: start;
}

@media (max-width: 768px) {
  .weekly-day {
    flex: 0 0 80%;
    min-width: 280px;
  }
}

/* Color-coded event cards in combined view */
.event-card-sage {
  border-left: 3px solid var(--sage-500);
  background: linear-gradient(90deg, rgba(135, 174, 115, 0.08) 0%, transparent 100%);
}

.event-card-amber {
  border-left: 3px solid var(--amber-500);
  background: linear-gradient(90deg, rgba(245, 158, 11, 0.08) 0%, transparent 100%);
}

.event-card-purple {
  border-left: 3px solid var(--purple-500);
  background: linear-gradient(90deg, rgba(168, 85, 247, 0.08) 0%, transparent 100%);
}

.event-card-navy {
  border-left: 3px solid var(--navy-500);
  background: linear-gradient(90deg, rgba(98, 125, 152, 0.08) 0%, transparent 100%);
}

/* Mobile Bottom Navigation */
.mobile-bottom-nav {
  animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translate(-50%, 20px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

/* Safe area padding for iPhones with home indicator */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .mobile-bottom-nav {
    bottom: calc(1rem + env(safe-area-inset-bottom));
  }
}

/* ============================================
   HOLIDAY COLOR VARIABLES
   ============================================ */
:root {
  /* Holiday Colors - very subtle backgrounds */
  --holiday-gold: #c9a227;
  --holiday-gold-light: rgba(201, 162, 39, 0.06);
  --holiday-pink: #ec4899;
  --holiday-pink-light: rgba(236, 72, 153, 0.06);
  --holiday-pinkLight: #f472b6;
  --holiday-pinkLight-light: rgba(244, 114, 182, 0.06);
  --holiday-blue: #3b82f6;
  --holiday-blue-light: rgba(59, 130, 246, 0.06);
  --holiday-lightBlue: #38bdf8;
  --holiday-lightBlue-light: rgba(56, 189, 248, 0.06);
  --holiday-yellow: #eab308;
  --holiday-yellow-light: rgba(234, 179, 8, 0.06);
  --holiday-yellowLight: #facc15;
  --holiday-yellowLight-light: rgba(250, 204, 21, 0.06);
  --holiday-purple: #9333ea;
  --holiday-purple-light: rgba(147, 51, 234, 0.06);
  --holiday-orange: #f97316;
  --holiday-orange-light: rgba(249, 115, 22, 0.06);
  --holiday-green: #16a34a;
  --holiday-green-light: rgba(22, 163, 74, 0.06);
  --holiday-slate: #64748b;
  --holiday-slate-light: rgba(100, 116, 139, 0.06);
}

/* ============================================
   WEEK ROW HOLIDAY INDICATOR
   ============================================ */

/* Week row with holiday - subtle background only, no border */
.week-row-holiday {
  position: relative;
  border-radius: 0.75rem;
  margin: 2px 0;
}

.week-row-holiday::before {
  content: '';
  position: absolute;
  /* Don't overlap the week number on the left */
  top: 0;
  right: 0;
  bottom: 0;
  left: 28px;
  border-radius: 0.75rem;
  pointer-events: none;
  z-index: 0;
}

/* Color variants - background only, no border */
.week-row-holiday--gold::before {
  background: var(--holiday-gold-light);
}

.week-row-holiday--pink::before {
  background: var(--holiday-pink-light);
}

.week-row-holiday--pinkLight::before {
  background: var(--holiday-pinkLight-light);
}

.week-row-holiday--blue::before {
  background: var(--holiday-blue-light);
}

.week-row-holiday--lightBlue::before {
  background: var(--holiday-lightBlue-light);
}

.week-row-holiday--yellow::before {
  background: var(--holiday-yellow-light);
}

.week-row-holiday--yellowLight::before {
  background: var(--holiday-yellowLight-light);
}

.week-row-holiday--purple::before {
  background: var(--holiday-purple-light);
}

.week-row-holiday--orange::before {
  background: var(--holiday-orange-light);
}

.week-row-holiday--green::before {
  background: var(--holiday-green-light);
}

.week-row-holiday--slate::before {
  background: var(--holiday-slate-light);
}

/* ============================================
   WEEK INDICATOR HOLIDAY BADGE
   ============================================ */

.week-indicator .week-indicator-holiday {
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.875rem;
  line-height: 1;
  z-index: 10;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
}

/* Multiple holidays - show first emoji with count */
.week-indicator-holiday-multi {
  display: flex;
  align-items: center;
  gap: 1px;
}

.week-indicator-holiday-count {
  font-size: 0.5rem;
  font-weight: 600;
  color: var(--ink);
  background: white;
  border-radius: 9999px;
  padding: 0 3px;
  min-width: 14px;
  text-align: center;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
}

/* ============================================
   DAY CELL HOLIDAY INDICATOR
   ============================================ */

.calendar-day-holiday {
  position: relative;
}

.calendar-day-holiday::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 0.75rem;
  pointer-events: none;
  z-index: 0;
}

/* Day holiday color variants - subtle tint with bottom accent */
.calendar-day-holiday--gold::after {
  background: var(--holiday-gold-light);
  border-bottom: 3px solid var(--holiday-gold);
}

.calendar-day-holiday--pink::after {
  background: var(--holiday-pink-light);
  border-bottom: 3px solid var(--holiday-pink);
}

.calendar-day-holiday--pinkLight::after {
  background: var(--holiday-pinkLight-light);
  border-bottom: 3px solid var(--holiday-pinkLight);
}

.calendar-day-holiday--blue::after {
  background: var(--holiday-blue-light);
  border-bottom: 3px solid var(--holiday-blue);
}

.calendar-day-holiday--lightBlue::after {
  background: var(--holiday-lightBlue-light);
  border-bottom: 3px solid var(--holiday-lightBlue);
}

.calendar-day-holiday--yellow::after {
  background: var(--holiday-yellow-light);
  border-bottom: 3px solid var(--holiday-yellow);
}

.calendar-day-holiday--yellowLight::after {
  background: var(--holiday-yellowLight-light);
  border-bottom: 3px solid var(--holiday-yellowLight);
}

.calendar-day-holiday--purple::after {
  background: var(--holiday-purple-light);
  border-bottom: 3px solid var(--holiday-purple);
}

.calendar-day-holiday--orange::after {
  background: var(--holiday-orange-light);
  border-bottom: 3px solid var(--holiday-orange);
}

.calendar-day-holiday--green::after {
  background: var(--holiday-green-light);
  border-bottom: 3px solid var(--holiday-green);
}

.calendar-day-holiday--slate::after {
  background: var(--holiday-slate-light);
  border-bottom: 3px solid var(--holiday-slate);
}

/* Holiday emoji label in day cell */
.day-holiday-label {
  position: absolute;
  top: 2px;
  left: 2px;
  font-size: 0.6rem;
  line-height: 1;
  z-index: 5;
  opacity: 0.9;
  filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.1));
}

/* ============================================
   UPCOMING HOLIDAYS INFO BOX
   ============================================ */

.upcoming-holidays {
  display: flex;
  gap: 0.75rem;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  padding: 0.5rem 0;
  margin-top: 1rem;
}

.upcoming-holidays::-webkit-scrollbar {
  height: 4px;
}

.upcoming-holiday-card {
  flex: 0 0 auto;
  min-width: 120px;
  max-width: 160px;
  padding: 0.5rem 0.75rem;
  border-radius: 0.5rem;
  scroll-snap-align: start;
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
  transition: all 0.2s ease;
  cursor: default;
}

.upcoming-holiday-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.upcoming-holiday-header {
  display: flex;
  align-items: center;
  gap: 0.375rem;
}

.upcoming-holiday-emoji {
  font-size: 1rem;
  line-height: 1;
}

.upcoming-holiday-name {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--ink);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.upcoming-holiday-countdown {
  font-size: 0.65rem;
  font-weight: 500;
  opacity: 0.8;
}

/* Color variants for upcoming holiday cards - stronger backgrounds than week rows */
.upcoming-holiday-card--gold {
  background: rgba(201, 162, 39, 0.12);
  border: 1px solid rgba(201, 162, 39, 0.3);
}
.upcoming-holiday-card--gold .upcoming-holiday-countdown { color: #92750e; }

.upcoming-holiday-card--pink {
  background: rgba(236, 72, 153, 0.12);
  border: 1px solid rgba(236, 72, 153, 0.3);
}
.upcoming-holiday-card--pink .upcoming-holiday-countdown { color: #be185d; }

.upcoming-holiday-card--pinkLight {
  background: rgba(244, 114, 182, 0.12);
  border: 1px solid rgba(244, 114, 182, 0.3);
}
.upcoming-holiday-card--pinkLight .upcoming-holiday-countdown { color: #db2777; }

.upcoming-holiday-card--blue {
  background: rgba(59, 130, 246, 0.12);
  border: 1px solid rgba(59, 130, 246, 0.3);
}
.upcoming-holiday-card--blue .upcoming-holiday-countdown { color: #1d4ed8; }

.upcoming-holiday-card--lightBlue {
  background: rgba(56, 189, 248, 0.12);
  border: 1px solid rgba(56, 189, 248, 0.3);
}
.upcoming-holiday-card--lightBlue .upcoming-holiday-countdown { color: #0284c7; }

.upcoming-holiday-card--yellow {
  background: rgba(234, 179, 8, 0.12);
  border: 1px solid rgba(234, 179, 8, 0.3);
}
.upcoming-holiday-card--yellow .upcoming-holiday-countdown { color: #a16207; }

.upcoming-holiday-card--yellowLight {
  background: rgba(250, 204, 21, 0.12);
  border: 1px solid rgba(250, 204, 21, 0.3);
}
.upcoming-holiday-card--yellowLight .upcoming-holiday-countdown { color: #ca8a04; }

.upcoming-holiday-card--purple {
  background: rgba(147, 51, 234, 0.12);
  border: 1px solid rgba(147, 51, 234, 0.3);
}
.upcoming-holiday-card--purple .upcoming-holiday-countdown { color: #7c3aed; }

.upcoming-holiday-card--orange {
  background: rgba(249, 115, 22, 0.12);
  border: 1px solid rgba(249, 115, 22, 0.3);
}
.upcoming-holiday-card--orange .upcoming-holiday-countdown { color: #c2410c; }

.upcoming-holiday-card--green {
  background: rgba(22, 163, 74, 0.12);
  border: 1px solid rgba(22, 163, 74, 0.3);
}
.upcoming-holiday-card--green .upcoming-holiday-countdown { color: #15803d; }

.upcoming-holiday-card--slate {
  background: rgba(100, 116, 139, 0.12);
  border: 1px solid rgba(100, 116, 139, 0.3);
}
.upcoming-holiday-card--slate .upcoming-holiday-countdown { color: #475569; }

/* Responsive adjustments */
@media (min-width: 640px) {
  .week-indicator .week-indicator-holiday {
    top: -8px;
    font-size: 0.875rem;
  }

  .week-row-holiday::before {
    left: 36px;
  }

  .day-holiday-label {
    font-size: 0.7rem;
  }

  .upcoming-holiday-card {
    min-width: 140px;
    max-width: 180px;
  }
}
